(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CommissionRecord"],{"1a2e":function(e,t,r){"use strict";var o=r("dda3"),a=r.n(o);a.a},"4e3a":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-view",{staticClass:"commission-record",attrs:{title:"report.CommissionRecord.Title"}},[r("export-order-report",{attrs:{slot:"options",type:"commission-record","query-data":e.queryData},slot:"options"}),e._v(" "),r("report-table-switch",{attrs:{slot:"options",columns:e.columns,"button-text":"report.Global.Button.ColumnFilter"},slot:"options"}),e._v(" "),r("report-view",{attrs:{loading:e.isLoading,data:e.commissionFlowList,columns:e.columns,queries:e.queries,"expand-key":"MTOrder"},on:{search:e.handleSearch,"current-change":e.handlePageChange,"sort-change":e.handleSortChange}})],1)},a=[],i=(r("8e6e"),r("ac6a"),r("456d"),r("96cf"),r("3b8d")),n=r("bd86"),s=r("d225"),_=r("b0b4"),c=r("308d"),p=r("6bb5"),u=r("4e2b"),P=r("9ab4"),m=r("60a3"),b=r("4bb5"),l=r("8c67"),E=r("66cf"),d=r("5e31"),A=r("7929"),v=r("5e04"),h=r("9eb8"),O=[{type:h["b"].DateRange,prop:"days",label:"report.Query.Times.Label",default:Object(E["g"])("nearly-1-week"),shortcuts:E["b"]},{type:h["b"].Select,prop:"CommissionType",label:"report.CommissionRecord.Query.CommissionType.Label",default:0,options:[{label:"report.SummaryReport.Query.IsDirectClient.Option1",value:0},{label:"enum.CommissionType.CA",value:1},{label:"enum.CommissionType.CAD",value:2}]},{type:h["b"].Text,prop:"MtOrder",label:"report.CommissionRecord.Query.MtOrder.Label",default:"",nonzero:!0},{type:h["b"].Text,prop:"Client",label:"report.CommissionRecord.Query.Client.Label",default:"",nonzero:!0}],I=[{prop:"MTOrder",label:"report.CommissionRecord.Column.MTOrder",width:90,visible:!0},{prop:"Client",label:"report.CommissionRecord.Column.Client",width:80,align:"center",visible:!0,visibleLocked:!0,fit:!0},{prop:"CommType",label:"report.CommissionRecord.Column.CommType",width:120,visible:!0,align:"center",formatter:v["a"].commissionType},{prop:"Amount",label:"report.CommissionRecord.Column.Amount",width:160,visible:!0,align:"right",sortable:!0,formatter:v["a"].number},{prop:"CommTime",label:"report.CommissionRecord.Column.CommTime",width:160,visible:!0,align:"center",sortable:!0,fit:!0,formatter:v["a"].dateTime}],y=r("e18c");function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(r,!0).forEach(function(t){Object(n["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var C=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(c["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.isLoading=!1,e.queries=O,e.columns=I,e.queryDays=[],e.queryData={BeginDate:0,EndDate:0,CommissionType:0,Client:0,MtOrder:0,SearchKey:"",Pager:{PageIndex:1,PageSize:10,OrderBy:[]}},e}return Object(u["a"])(t,e),Object(_["a"])(t,[{key:"saveQueries",value:function(){this.queries=Object(E["i"])(this.queries,U({},this.queryData,{days:this.queryDays}))}},{key:"reloadList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.prev=1,e.next=4,this.getCommissionFlowList(this.queryData);case 4:this.saveQueries(),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](1);case 9:return e.prev=9,this.isLoading=!1,e.finish(9);case 12:case"end":return e.stop()}},e,this,[[1,7,9,12]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"handleSearch",value:function(e){var t=e.days,r=e.CommissionType,o=e.SearchKey,a=void 0===o?"":o,i=e.MtOrder,n=e.Client;this.queryDays=t,this.queryData.Pager.PageIndex=1,isNaN(+i)||(this.queryData.MtOrder=+i),isNaN(+n)||(this.queryData.Client=+n),isNaN(+r)||(this.queryData.CommissionType=+r),this.queryData.SearchKey=a,this.queryData.BeginDate=Object(E["c"])(t[0]),this.queryData.EndDate=Object(E["c"])(t[1],!0),this.reloadList()}},{key:"handlePageChange",value:function(e){this.queryData.Pager.PageIndex=e,this.reloadList()}},{key:"handleSortChange",value:function(e){var t=e.SortName,r=e.SortOrder;this.queryData.Pager.PageIndex=1,this.queryData.Pager.OrderBy=[],void 0!==r&&(this.queryData.Pager.OrderBy=[{Field:t,Type:r}]),this.reloadList()}}]),t}(m["d"]);Object(P["a"])([Object(b["a"])("AccountStore").State],C.prototype,"accountInfo",void 0),Object(P["a"])([Object(b["a"])("TradeStore").State],C.prototype,"commissionFlowList",void 0),Object(P["a"])([Object(b["a"])("TradeStore").Action],C.prototype,"getCommissionFlowList",void 0),C=Object(P["a"])([Object(m["a"])({components:{AppView:l["a"],ReportTableSwitch:d["a"],ReportView:A["a"],ExportOrderReport:y["a"]}})],C);var N=C,g=N,k=(r("5a56"),r("2877")),f=Object(k["a"])(g,o,a,!1,null,"5ca48164",null);t["default"]=f.exports},"5a56":function(e,t,r){"use strict";var o=r("b702"),a=r.n(o);a.a},b702:function(e,t,r){},dda3:function(e,t,r){},e18c:function(e,t,r){"use strict";var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-button",{staticClass:"export-button",attrs:{type:"info",size:"medium",round:""},on:{click:e.handleExport}},[e._v(e._s(e.$t("report.Global.Button.Export")))])},a=[],i=(r("96cf"),r("3b8d")),n=r("d225"),s=r("b0b4"),_=r("308d"),c=r("6bb5"),p=r("4e2b"),u=r("9ab4"),P=r("60a3"),m=r("7618"),b=r("2b0e"),l=r("a97b"),E=(Object({VUE_APP_MAIN_CN:"//{LOCATION}",VUE_APP_MAIN_UK:"//portal.kvbprimexxxx.co.uk",VUE_APP_MAIN_INT:"//portal.kvbprimexxxxx.com",VUE_APP_BASE_API_CN:"//api.{LOCATION}",VUE_APP_BASE_API_UK:"//ucapi.kvbprime.co.uk",VUE_APP_BASE_API_INT:"//api.kvbprime.com",VUE_APP_TRADE_CN:"//trade.kvbprime.asia",VUE_APP_TRADE_UK:"//trade.kvbprime.co.uk",VUE_APP_TRADE_INT:"//trade.kvbprime.com",VUE_APP_CMS_API_CN:"//cmsapi.{LOCATION}",VUE_APP_CMS_API_UK:"//cmsapi.kvbprime.co.uk",VUE_APP_CMS_API_INT:"//cmsapi.kvbprime.com",VUE_APP_HOME_ADDRESS_CN:"//kvbprime.asia",VUE_APP_HOME_ADDRESS_UK:"//kvbprime.co.uk",VUE_APP_HOME_ADDRESS_INT:"//kvbprime.com",VUE_APP_PAY_CN:"//pay.kvbprime.asia",VUE_APP_PAY_UK:"//pay.kvbprime.co.uk",VUE_APP_PAY_INT:"//pay.kvbprime.com",VUE_APP_NEW_BIT:"//main.gotnb.site/_",VUE_APP_NEW_BIT_INT:"//main.gotnb.site/_",VUE_APP_NEW_BIT_REGISTER:"//main.gotnb.site/v2/account/register",VUE_APP_NEW_BIT_REGISTER_TOKEN:"17fc33df88704b41b45de84def55c64a",VUE_APP_NEW_BIT_SDK_URL:"//main.gotnb.site",VUE_APP_NEW_BIT_SDK_LOGIN_URL:"//main.gotnb.site/user/register",VUE_APP_NEW_BIT_SDK_LOGIN_URL_INT:"//gotc.io/user/register",VUE_APP_NEW_BIT_SDK_TOKEN:"17fc33df88704b41b45de84def55c64a",VUE_APP_REGISTER_CN:"//register.kvbprime",VUE_APP_REGISTER_UK:"//register.kvbprime.co.uk",VUE_APP_REGISTER_INT:"//register.kvbprime.com",VUE_APP_QUOTE_API_CN:"//quote.{LOCATION}",VUE_APP_QUOTE_API_UK:"//quote.kvbprime.co.uk",VUE_APP_QUOTE_API_INT:"//quote.kvbprime.com",VUE_APP_INVITE_CLIENT_CN:"//kvbinvite.com",VUE_APP_INVITE_CLIENT_UK:"//kvbshare.co.uk",VUE_APP_INVITE_CLIENT_INT:"//kvbshare.com",VUE_APP_INVITE_IB_CN:"//{LOCATION}",VUE_APP_INVITE_IB_UK:"//kvbshare.co.uk",VUE_APP_INVITE_IB_INT:"//kvbshare.com",VUE_APP_CHAT_CN:"//lc.chat/now/10511302",VUE_APP_CHAT_UK:"//direct.lc.chat/11370537",VUE_APP_CHAT_INT:"//direct.lc.chat/11370537",VUE_APP_STATIC_FILE_CN:"//storage.googleapis.com/kvbprime",VUE_APP_STATIC_FILE_UK:"//statics.kvbprime.co.uk",VUE_APP_STATIC_FILE_INT:"//statics.kvbprime.com",VUE_APP_CRM_V2_CN:"//uc.mykvbprime.com",VUE_APP_CRM_V2_UK:"//uc.kvbprime.co.uk",VUE_APP_CRM_V2_INT:"//uc.kvbprime.com",VUE_APP_HELP_CENTER_CN:"//help.kvbprime.asia",VUE_APP_HELP_CENTER_UK:"/",VUE_APP_HELP_CENTER_INT:"//help.kvbprime.com",VUE_APP_IB_LOGIN_CN:"//kvbma.me",VUE_APP_IB_NEW_LOGIN_CN:"//kvbma.me",VUE_APP_IB_LOGIN_UK:"/",VUE_APP_IB_LOGIN_INT:"//kvbib.com",VUE_APP_IB_LOGIN_DEV_CN:"//ib88beta.fteamx.com",VUE_APP_IB_LOGIN_DEV_UK:"/",VUE_APP_IB_LOGIN_DEV_INT:"//ib88beta-int.fteamx.com",VUE_APP_UPGRADE_API_CN:"//api.mykvbprime.com",VUE_APP_UPGRADE_API_UK:"/",VUE_APP_UPGRADE_API_INT:"//portal.kvbprime.com",VUE_APP_GOOGLE:"533538864517-var9qp028uo23pd481okeb5kf1hqq0dj.apps.googleusercontent.com",VUE_APP_TWITTER:"PKWJJMLjl0kITeAgK5QQ8V7m9",VUE_APP_FACEBOOK:"541089193243130",VUE_APP_AUTH_PROXY:"https://auth-server.herokuapp.com/proxy",VUE_APP_ACTIVITY_API_CN:"//activity-api.kvbprime.com.cn",VUE_APP_ACTIVITY_API_UK:"/",VUE_APP_ACTIVITY_API_INT:"/",VUE_APP_GOOGLE_GRECAPT_INT:"//www.recaptcha.net/recaptcha/api.js?hl=en",VUE_APP_GOOGLE_SITEKEY_INT:"6LcxzMAZAAAAAM2zQZWR_kLhR9mvraDLAeM1BYb5",VUE_APP_COPYTRADE_CN:"//kvb.followme.com",VUE_APP_COPYTRADE_UK:"/",VUE_APP_COPYTRADE_INT:"//kvbprime.followme.com",NODE_ENV:"production",BASE_URL:"/"}),function(){function e(){Object(n["a"])(this,e)}return Object(s["a"])(e,[{key:"export",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,r,o){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=l["a"].get("token"),window.open("".concat(b["default"].prototype.ENV_BASE_API+r+"?Token="+a+t));case 2:case"end":return e.stop()}},e)}));function t(t,r,o){return e.apply(this,arguments)}return t}()},{key:"urlEncode",value:function(e,t,r){if(null===e)return"";var o="",a=Object(m["a"])(e);if("string"===a||"number"===a||"boolean"===a)o+="&"+t+"="+e;else for(var i in e)if(i){var n=null==t?i:t+(e instanceof Array?"["+i+"]":"."+i);o+=this.urlEncode(e[i],n,r)}return o}},{key:"exportPositionSummary",value:function(e){e.Pager.PageIndex=1,e.Pager.PageSize=1e4,e=this.urlEncode(e),this.export(e,"/api/Trade/ExportPositionSummary","get")}},{key:"exportComission",value:function(e){e.Pager.PageIndex=1,e.Pager.PageSize=1e4,e=this.urlEncode(e),this.export(e,"/api/Trade/ExportCommissionFlows","get")}},{key:"exportOrder",value:function(e,t){t.Pager.PageIndex=1,t.Pager.PageSize=1e4,t=this.urlEncode(t),this.export(t,e,"get")}},{key:"exportHistoryOrders",value:function(e){this.exportOrder("/api/order/ExportHistoryOrders",e)}},{key:"exportPositionOrders",value:function(e){this.exportOrder("/api/order/ExportPositionOrders",e)}}]),e}()),d=function(e){function t(){return Object(n["a"])(this,t),Object(_["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(p["a"])(t,e),Object(s["a"])(t,[{key:"handleExport",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.queryData){e.next=2;break}return e.abrupt("return",!1);case 2:if(t=!1,r=new E,o=JSON.parse(JSON.stringify(this.queryData)),a=this.type,"history-orders"!==a){e.next=16;break}return e.prev=7,e.next=10,r.exportHistoryOrders(o);case 10:t=!0,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](7),this.$message.error("exportHistoryOrders error:"+e.t0.message);case 16:if("position-orders"!==a){e.next=26;break}return e.prev=17,e.next=20,r.exportPositionOrders(o);case 20:t=!0,e.next=26;break;case 23:e.prev=23,e.t1=e["catch"](17),this.$message.error("exportPositionOrders error:"+e.t1.message);case 26:if("commission-record"!==a){e.next=36;break}return e.prev=27,e.next=30,r.exportComission(o);case 30:t=!0,e.next=36;break;case 33:e.prev=33,e.t2=e["catch"](27),this.$message.error("exportComission error:"+e.t2.message);case 36:if("summary-report"!==a){e.next=46;break}return e.prev=37,e.next=40,r.exportPositionSummary(o);case 40:t=!0,e.next=46;break;case 43:e.prev=43,e.t3=e["catch"](37),this.$message.error("exportComission error:"+e.t3.message);case 46:t||this.$message.error("Export failed:"+a);case 47:case"end":return e.stop()}},e,this,[[7,13],[17,23],[27,33],[37,43]])}));function t(){return e.apply(this,arguments)}return t}()}]),t}(P["d"]);Object(u["a"])([Object(P["c"])()],d.prototype,"queryData",void 0),Object(u["a"])([Object(P["c"])({default:function(){return""}})],d.prototype,"type",void 0),d=Object(u["a"])([P["a"]],d);var A=d,v=A,h=(r("1a2e"),r("2877")),O=Object(h["a"])(v,o,a,!1,null,"9641d01c",null);t["a"]=O.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7bfb4673"],{"03d3":function(e,t,i){},2173:function(e,t,i){"use strict";var r=i("03d3"),a=i.n(r);a.a},"5c75":function(e,t,i){},"67c2":function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return a});var r={picture:"profile-client-picture",contact:"profile-client-contact",account:"profile-client-account-info",accountWallet:"profile-client-account-info-wallet",accountSuccess:"profile-client-account-info-success",address:"profile-client-address-info",addressSuccess:"profile-client-address-info-success",phone:"profile-client-contact-phone",verify:"profile-client-verify"},a={picture:"profile-picture",contact:"profile-contact",account:"profile-account-info",accountWallet:"profile-account-info-wallet",accountSuccess:"profile-account-info-success",phone:"profile-contact-phone",verify:"profile-verify"}},8342:function(e,t,i){"use strict";var r=i("5c75"),a=i.n(r);a.a},"9d1a":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("app-view",{attrs:{title:e.title,"extend-callback":e.handleCancel}},[i("form-item-group",{ref:"validator",attrs:{model:e.formData,validation:e.validation()}},[i("div",{staticClass:"tab-content"},[e.ibIsMobileError?i("p",{staticClass:"header-text"},[e._v(e._s(e.$t("profile.Contact.Text0")))]):e._e(),e._v(" "),i("div",{staticStyle:{display:"flex"}},[i("form-item",{staticStyle:{"max-width":"10em","margin-right":"1em"},attrs:{prop:"MobilePrefix",label:e.$t("profile.MobilePrefix")}},[i("el-select",{on:{blur:function(t){return e.$refs.validator.validate("MobilePrefix")}},model:{value:e.formData.MobilePrefix,callback:function(t){e.$set(e.formData,"MobilePrefix",t)},expression:"formData.MobilePrefix"}},e._l(e.areaData,function(t){return i("el-option-group",{key:t.title,attrs:{label:t.title}},e._l(t.list,function(t){return i("el-option",{key:t[0],attrs:{label:t[2],value:t[2]}},[e._v("\n                "+e._s(e.mobileArea(t))+"\n              ")])}),1)}),1)],1),e._v(" "),i("form-item",{attrs:{prop:"Mobile",label:e.$t("profile.Phone")}},[i("el-input",{attrs:{value:e.formData.Mobile,type:"tel"},on:{blur:function(t){return e.$refs.validator.validate("Mobile")},input:e.handlerInputNumber}})],1)],1),e._v(" "),e.isINT?e._e():i("form-item",{attrs:{prop:"VerifyCode",trigger:!1,label:e.$t("profile.VerifyCode")}},[i("el-input",{on:{blur:function(t){return e.$refs.validator.validate("VerifyCode")}},model:{value:e.formData.VerifyCode,callback:function(t){e.$set(e.formData,"VerifyCode",t)},expression:"formData.VerifyCode"}}),e._v(" "),i("btn-timer",{attrs:{round:"",size:"mini",text:e.$t("profile.GetVerifyCode"),time:60,isDisabled:!e.phoneRule},on:{click:function(e){e.preventDefault()},isClick:e.handlerBtnTimer,startTimer:function(t){return e.getSMSCode(e.codeData)}}})],1)],1),e._v(" "),i("div",{staticClass:"btn-wrap"},[i("el-button",{staticClass:"g-main-btn el-btn-with-loading",class:{"is-disabled":e.submitDisabled},attrs:{loading:e.isBtnLoading,round:"",type:"primary"},on:{click:function(t){return e.postData(e.formData)}}},[e._v("\n        "+e._s(e.$t("profile.Btn")))]),e._v(" "),i("p",{staticClass:"commit-text"},[e._v("\n        "+e._s(e.$t("profile.CommitText")))])],1)])],1)},a=[],n=(i("a481"),i("768b")),o=(i("96cf"),i("3b8d")),c=i("d225"),s=i("b0b4"),l=i("308d"),u=i("6bb5"),f=i("4e2b"),p=i("9ab4"),b=i("60a3"),d=i("4bb5"),m=i("396f"),h=i("67c2"),v=i("7a96"),y=i("843e"),g=i("dc5e"),C=i("5364"),k=i("87dc"),x=i("fb29"),M=i("b77e"),T=i("8c67"),D=i("ffc3"),$=new y["a"],j=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.formData={Mobile:"",MobilePrefix:"",VerifyCode:"",PreVerifyCode:""},e.areaData=m["a"],e.validationRegex=v["a"],e.isBtnLoading=!1,e}return Object(f["a"])(t,e),Object(s["a"])(t,[{key:"beforeMount",value:function(){if(!this.title)return this.handleCancel();this.getIp()}},{key:"getIp",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i,r,a,n,o,c,s,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getVisitorInfo();case 2:if(t=this.visitorInfo.countryCode,i=void 0===t?"":t,r=this.formData.MobilePrefix,!r){e.next=6;break}return e.abrupt("return");case 6:for(a=i.toLocaleLowerCase(),n=0,o=this.areaData.length;n<o;n++)for(c=this.areaData[n].list,s=0,l=c.length;s<l;s++)c[s][1]===a&&(r=c[s][2]);this.formData.MobilePrefix=r||"86";case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"validation",value:function(){var e=this,t=this.$t("profile.ErrorMsg.Empty");return{Mobile:[{type:C["c"].Required,message:t+this.$t("profile.Phone")},{type:C["c"].Custom,callback:function(){return e.phoneRule},message:this.$t("profile.ErrorMsg.Mobile.Msg1")}],MobilePrefix:[{type:C["c"].Required,message:t+this.$t("profile.MobilePrefix")}],VerifyCode:[{type:C["c"].Required,message:t+this.$t("profile.VerifyCode")},{type:C["c"].Custom,callback:function(e){return v["a"].VerifyCode.test(e)},message:this.$t("profile.ErrorMsg.VerifyCode.Msg1")}]}}},{key:"getSMSCode",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.getVerifyCode(t);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e["catch"](0),console.error(e.t0.message),this.$message.error(e.t0.message);case 9:case"end":return e.stop()}},e,this,[[0,5]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"postData",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==this.isBtnLoading){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,this.isBtnLoading=!0,t.PreVerifyCode=this.$route.params.code||"",this.isINT){e.next=8;break}return e.next=8,(new g["a"]).handleChangeMobile(t);case 8:if(!this.isINT){e.next=12;break}return i=t.Mobile,r=t.MobilePrefix,e.next=12,$.postMobile({Mobile:i,MobilePrefix:r});case 12:return e.next=14,this.getAccountInfo();case 14:this.handleCancel(!0),e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](2),console.error(e.t0.message),this.$message.error(e.t0.message);case 21:return e.prev=21,this.isBtnLoading=!1,e.finish(21);case 24:case"end":return e.stop()}},e,this,[[2,17,21,24]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"mobileArea",value:function(e){var t=Object(n["a"])(e,3),i=t[0],r=(t[1],t[2]);return"".concat(i," +").concat(r)}},{key:"handlerBtnTimer",value:function(){this.$refs.validator.validate("Mobile")}},{key:"handleCancel",value:function(e){var t=this.accountInfo,i=t.AccountType,r=t.IDCardStatus,a=this.$route.query.origin;return a?this.$router.push({path:a,query:this.$route.query}):e&&r!==k["c"].IDCardCertified&&2!==i&&"add"===this.$route.params.to?this.$router.replace({name:this.accountPath.account}):void this.$router.replace({name:this.accountPath.contact})}},{key:"handlerInputNumber",value:function(e){var t=e.replace(/[^0-9]/,"");t.length>16&&(t=this.formData.Mobile),this.formData.Mobile=t}},{key:"isINT",get:function(){return 86!==+this.formData.MobilePrefix}},{key:"title",get:function(){var e={edit:"profile.Contact.EditPhone",add:"profile.PageTitle.ContactPhone"};return e[this.$route.params.to]}},{key:"codeData",get:function(){return{LoginName:this.formData.Mobile,ReceiverType:1,PhoneArea:this.formData.MobilePrefix}}},{key:"accountPath",get:function(){return 2===this.accountInfo.AccountType?h["a"]:h["b"]}},{key:"ibIsMobileError",get:function(){var e=this.accountInfo,t=e.Mobile,i=e.MemberID,r=e.AccountType;return!t&&i&&2!==r}},{key:"submitDisabled",get:function(){var e=this.formData,t=(e.Mobile,e.MobilePrefix),i=e.VerifyCode;return this.isINT?!(this.phoneRule&&!isNaN(+t)):!(this.phoneRule&&!isNaN(+t)&&v["a"].VerifyCode.test(i))}},{key:"phoneRule",get:function(){var e=this.formData,t=e.Mobile,i=e.MobilePrefix;return 86===+i?v["a"].PhoneCN.test(t):v["a"].Phone.test(t)}}]),t}(b["d"]);Object(p["a"])([Object(d["a"])("AccountStore").State],j.prototype,"accountInfo",void 0),Object(p["a"])([Object(d["a"])("AccountStore").Action],j.prototype,"getAccountInfo",void 0),Object(p["a"])([Object(d["a"])("AccountStore").State],j.prototype,"visitorInfo",void 0),Object(p["a"])([Object(d["a"])("AccountStore").Action],j.prototype,"getVisitorInfo",void 0),j=Object(p["a"])([Object(b["a"])({metaInfo:function(){return{title:"KVB PRIME"}},components:{AppView:T["a"],FormItem:x["a"],FormItemGroup:M["a"],BtnTimer:D["a"]}})],j);var O=j,P=O,w=(i("8342"),i("2877")),I=Object(w["a"])(P,r,a,!1,null,"57753c0e",null);t["default"]=I.exports},ffc3:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-button",e._b({staticClass:"get-code-btn",class:{"is-disabled":e.isDisabled||e.smsCodeTimer},attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.startTimer(t)}}},"el-button",e.$attrs,!1),[e._v("\n  "+e._s(e.waitTime?e.waitTime+"s":e.text)+"\n")])},a=[],n=i("d225"),o=i("b0b4"),c=i("308d"),s=i("6bb5"),l=i("4e2b"),u=i("9ab4"),f=i("60a3"),p=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(c["a"])(this,Object(s["a"])(t).apply(this,arguments)),e.waitTime=0,e.smsCodeTimer=null,e}return Object(l["a"])(t,e),Object(o["a"])(t,[{key:"created",value:function(){this.clearTimer()}},{key:"mounted",value:function(){this.clearTimer()}},{key:"beforeDestroy",value:function(){this.clearTimer()}},{key:"startTimer",value:function(){if(this.$emit("isClick"),this.isDisabled||this.smsCodeTimer)return!1;this.hanlderTimer(this.time),this.$emit("startTimer")}},{key:"hanlderTimer",value:function(e){var t=this;this.waitTime=e--,this.smsCodeTimer=setTimeout(function(){if(t.waitTime=e,e<=0)return clearTimeout(t.smsCodeTimer),void(t.smsCodeTimer=null);t.hanlderTimer(e)},1e3)}},{key:"clearTimer",value:function(){clearTimeout(this.smsCodeTimer),this.smsCodeTimer=null}}]),t}(f["d"]);Object(u["a"])([Object(f["c"])({default:function(){return""}})],p.prototype,"text",void 0),Object(u["a"])([Object(f["c"])({default:function(){return!1}})],p.prototype,"isDisabled",void 0),Object(u["a"])([Object(f["c"])({default:function(){return 30}})],p.prototype,"time",void 0),p=Object(u["a"])([f["a"]],p);var b=p,d=b,m=(i("2173"),i("2877")),h=Object(m["a"])(d,r,a,!1,null,"5fbcfe6c",null);t["a"]=h.exports}}]);